{"version":3,"file":"index.js","sources":["../src/reducer.js","../src/constants.js","../src/menus/CmrCsModuleMainMenu.js","../src/actions.js","../src/pages/ChequeListPage.js","../src/index.js"],"sourcesContent":["import {\n    formatServerError, formatGraphQLError, parseData, pageInfo,\n    dispatchMutationReq, dispatchMutationErr, dispatchMutationResp\n} from '@openimis/fe-core';\n\nfunction reducer(\n    state = {\n        fetchingCheques: false,\n        errorCheques: null,\n        fetchedMyCheque: false,\n        myCheques: [],\n        myChequesPageInfo: { totalCount: 0 },\n        submittingMutation: false,\n        mutation: {},        \n    },\n    action,\n) {\n    switch (action.type) {\n        case 'LOCATION_USER_DISTRICTS_RESP':\n            console.log(`HÃ©, I'm My Module... are you in ${action.payload.data.userDistricts[0].name}?`);\n            return state;                                  \n        case 'CMS_CS_CHECKLIST_REQ':\n            return {\n                ...state,\n                fetchingCheques: true,\n                fetchedMyCheques: false,\n                myCheques: [],\n                myChequesPageInfo: { totalCount: 0 },\n                errorCheques: null,\n            };\n        case 'CMS_CS_CHECKLIST_RESP':\n            return {\n                ...state,\n                fetchingCheques: false,\n                fetchedMyCheques: true,\n                myCheques: parseData(action.payload.data.healthFacilities),\n                myChequesPageInfo: pageInfo(action.payload.data.healthFacilities),\n                errorCheques: formatGraphQLError(action.payload)\n            };\n        case 'CMS_CS_CHECKLIST_ERR':\n            return {\n                ...state,\n                fetchingMyEntities: false,\n                errorMyEntities: formatServerError(action.payload)\n            };\n        case 'MY_MODULE_CREATE_ENTITY_REQ':\n            return dispatchMutationReq(state, action)\n        case 'MY_MODULE_CREATE_ENTITY_ERR':\n            return dispatchMutationErr(state, action);\n        case 'MY_MODULE_CREATE_ENTITY_RESP':\n            return dispatchMutationResp(state, \"createLocation\", action);         \n        default:\n            return state;\n    }\n}\n\nexport default reducer;","import _ from \"lodash\";\n\nexport const RIGHT_ADD = 111002;\nexport const RIGHT_SUBMIT = 111007;","import React, { Component } from \"react\";\nimport { injectIntl } from \"react-intl\";\nimport { connect } from \"react-redux\";\nimport { ListAlt, ScreenShare, ImportExport } from \"@material-ui/icons\";\nimport { formatMessage, MainMenuContribution, withModulesManager } from \"@openimis/fe-core\";\nimport { RIGHT_ADD, RIGHT_SUBMIT } from \"../constants\";\n\nclass CmrCseMainMenu extends Component {\n    render() {\n      const { rights } = this.props;\n      let entries = [];\n      if (!!rights.filter((r) => r >= RIGHT_ADD && r <= RIGHT_SUBMIT).length) {\n        // RIGHT_SEARCH is shared by HF & HQ staff)\n        entries.push({\n          text: formatMessage(this.props.intl, \"cheque\", \"menu.chequeImport\"),\n          icon: <ImportExport />,\n          route: \"/cheque/import\",\n        });\n\n        entries.push({\n            text: formatMessage(this.props.intl, \"cheque\", \"menu.chequeList\"),\n            icon: <ListAlt />,\n            route: \"/cheque/list\",\n          });\n      }\n      if (!entries.length) return null;\n      return (\n        <MainMenuContribution\n          {...this.props}\n          header={formatMessage(this.props.intl, \"cheque management\", \"cheque.mainMenu\")}\n          icon={<ScreenShare />}\n          entries={entries}\n        />\n      );\n    }\n  }\n  \n  const mapStateToProps = (state) => ({\n    rights: !!state.core && !!state.core.user && !!state.core.user.i_user ? state.core.user.i_user.rights : [],\n  });\n  export default withModulesManager(injectIntl(connect(mapStateToProps)(CmrCseMainMenu)));","import {\n    graphql, formatPageQueryWithCount, formatMutation\n} from \"@openimis/fe-core\";\n\nexport function fetchCheques() {\n    const payload = formatPageQueryWithCount(\n        \"healthFacilities\",\n        null,\n        [\"code\", \"name\"]\n    );\n    return graphql(payload, 'CMS_CS_CHECKLIST');\n}","import React, { Component } from \"react\";\nimport { withTheme, withStyles } from \"@material-ui/core/styles\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { injectIntl } from 'react-intl';\nimport { formatMessageWithValues, FormattedMessage } from \"@openimis/fe-core\";\nimport { fetchCheques } from \"../actions\"\nimport { ProgressOrError, Table } from \"@openimis/fe-core\";\n\nconst styles = theme => ({\n    page: theme.page,\n});\n\nclass ChequeListPage extends Component {\n\n    componentDidMount() {\n        this.props.fetchCheques();\n    }\n\n    render() {\n        const { \n            intl,\n            classes,\n            fetchingCheques,\n            errorCheques,\n            fetchedMyCheques,\n            myCheques,\n            myChequesPageInfo \n        } = this.props;\n\n        return (\n            <div className={classes.page}>\n                <ProgressOrError progress={fetchingCheques} error={errorCheques} />\n                <h1>\n                    <FormattedMessage module=\"CmrCs\" id=\"Cheque.List.Header\" />\n                </h1>\n                <table>\n                    {!!myCheques && myCheques.map(e=> (\n                        <tr><td>{e.code}</td><td>{e.name}</td></tr>\n                    ))}\n                </table>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    fetchingCheques: state.cmr_cs.fetchingCheques,\n    errorCheques: state.cmr_cs.errorCheques,\n    fetchedMyCheques: state.cmr_cs.fetchedMyCheques,\n    myCheques: state.cmr_cs.myCheques,\n    myChequesPageInfo: state.cmr_cs.myChequesPageInfo,\n});\n\n\n\nconst mapDispatchToProps = dispatch => {\n    return bindActionCreators({ fetchCheques }, dispatch);\n};\n\nexport default injectIntl(withTheme(withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(ChequeListPage))));","import messages_en from \"./translations/en.json\";\nimport messages_fr from \"./translations/fr.json\";\nimport reducer from \"./reducer\";\nimport CmrCsModuleMainMenu from \"./menus/CmrCsModuleMainMenu\";\n\nimport ChequeListPage from \"./pages/ChequeListPage\";\n\nconst ROUTE_CMR_CS_LIST = \"cheque/list\"\nconst ROUTE_CMR_CS_IMPORT = \"cheque/list\"\n\nconst DEFAULT_CONFIG = {\n  \"translations\": [\n    { key: \"en\", messages: messages_en },\n    { key: \"fr\", messages: messages_fr },\n  ],\n  \"reducers\": [{ key: 'cmr_cs', reducer }],\n  \"core.MainMenu\" : [CmrCsModuleMainMenu],\n  \"core.Router\": [\n    { path: ROUTE_CMR_CS_LIST, component: ChequeListPage },\n   // { path: ROUTE_CMR_CS_IMPORT, component: ChequeImportPage },\n  ],\n}\n\nexport const CmrCsModule = (cfg) => {\n  return { ...DEFAULT_CONFIG, ...cfg };\n}"],"names":["reducer","state","fetchingCheques","errorCheques","fetchedMyCheque","myCheques","myChequesPageInfo","totalCount","submittingMutation","mutation","action","type","console","log","payload","data","userDistricts","name","_objectSpread","fetchedMyCheques","parseData","healthFacilities","pageInfo","formatGraphQLError","fetchingMyEntities","errorMyEntities","formatServerError","dispatchMutationReq","dispatchMutationErr","dispatchMutationResp","RIGHT_ADD","RIGHT_SUBMIT","CmrCseMainMenu","rights","props","entries","filter","r","length","push","text","formatMessage","intl","icon","React","ImportExport","route","ListAlt","MainMenuContribution","_extends","ScreenShare","Component","mapStateToProps","core","user","i_user","withModulesManager","injectIntl","connect","fetchCheques","formatPageQueryWithCount","graphql","styles","theme","page","ChequeListPage","classes","ProgressOrError","FormattedMessage","map","e","code","cmr_cs","mapDispatchToProps","dispatch","bindActionCreators","withTheme","withStyles","ROUTE_CMR_CS_LIST","DEFAULT_CONFIG","key","messages","messages_en","messages_fr","CmrCsModuleMainMenu","path","component","CmrCsModule","cfg"],"mappings":"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"}